{% extends 'base.html' %}

{% block content %}
 <section id="recipes"> 

  <h1>Recipes</h1>


<section id="recipe-filters" class="filters">

  <form id="filter-form" autocomplete="off"
    hx-get=""
    hx-trigger="change, keyup delay:500ms"
    hx-target="#recipe-list">

    <div id="search-form">
      <input class="new-search" name='q' type='text' placeholder='Search...' >
      <span class="material-symbols-outlined">
      search
      </span>
    </div>

    <ul id="filter-list" class="recipe-filter-list">
      <li>
      <span id="open-filters" class="material-symbols-outlined">
      tune 
      </span>       
      <ul id="inner-list">
          {% if stock_instance %}
            <li>
              <label class="checkbox-label">
                <input type="checkbox" name="stock_instance_id" value={{ stock_instance }} id="filter-input" > 
                My stockFoods 
              </label>
            </li>
          <input type="hidden" name="stock_instance" value={{ stock_instance }} >
          {% endif %}
        </ul>
      </li>
    </ul>

  </form>
</section>

    <ul id="recipe-list" hx-swap-oob="true">
    {% for recipe in recipe_list %}
      <li>
        <section id="recipe-detail">
          <article class="dialog-container recipe-container">
            <img src="{{ recipe.image }}" 
                 loading="lazy"
                 alt="{{ recipe.name }}"
                 class="food-image">
            
            <a href="{{ recipe.get_absolute_url }}">
              <h1>{{ recipe.name }}</h1>
              <p>Ingredients: {{ recipe.display_ingredients }}</p>
            </a>
          </article>
        </section>
      </li>
    {% endfor %}
    </ul>

  <a class="add-link" href="{% url 'recipe-create' %}" >Add recipe <span class="material-symbols-outlined">add</span></a>

    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}"><span class="material-symbols-outlined">
arrow_left_alt
</span></a>
        {% else %}

    <a href=""><span class="material-symbols-outlined">
    arrow_left_alt
    </span></a>
        {% endif %}

        <span class="current">{{ page_obj.number }}</span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}"><span class="material-symbols-outlined">
arrow_right_alt
</span></a>
        {% else %}

          <a href=""><span class="material-symbols-outlined">
arrow_right_alt
</span></a>
        {% endif %}
    </span>
</section>

{% endblock %}
